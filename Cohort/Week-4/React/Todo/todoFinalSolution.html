<!DOCTYPE html>
<html>

<head>
  <script>
    let globalId = 1;
    let todoState = [];
    let oldTodoState = [];

    function addTodoToDom(todo) {
      const div = document.createElement("div");
      div.innerHTML = `
        <p>ID: ${todo.id}</p>
        <p>Title: ${todo.title}</p>
        <p>Description: ${todo.description}</p>
        <button onclick="removeTodoFromDom(${todo.id})">Remove</button>
        <button onclick="updateTodoInDom(${todo.id})">Update</button>
        <hr>
      `;
      document.getElementById("todos").appendChild(div);
    }

    function removeTodoFromDom(todoId) {
      const todoIndex = todoState.findIndex(todo => todo.id === todoId);
      if (todoIndex !== -1) {
        todoState.splice(todoIndex, 1);
        updateState(todoState);
      }
    }

    function updateTodoInDom(todoId) {
      const todoIndex = todoState.findIndex(todo => todo.id === todoId);
      if (todoIndex !== -1) {
        const updatedTitle = prompt("Enter updated title:", todoState[todoIndex].title);
        const updatedDescription = prompt("Enter updated description:", todoState[todoIndex].description);
        todoState[todoIndex].title = updatedTitle;
        todoState[todoIndex].description = updatedDescription;
        updateState(todoState);
      }
    }

    function updateState(newTodos) {
      const todosContainer = document.getElementById("todos");
      todosContainer.innerHTML = "";

      newTodos.forEach(addTodoToDom);

      oldTodoState = newTodos.slice();
    }

    function addTodo() {
      const title = document.getElementById("title").value;
      const description = document.getElementById("description").value;
      todoState.push({
        title: title,
        description: description,
        id: globalId++,
      });
      updateState(todoState);
    }
  </script>
</head>

<body>
  <input type="text" id="title" placeholder="Todo title"><br><br>
  <input type="text" id="description" placeholder="Todo description"><br><br>
  <button onclick="addTodo()">Add todo</button><br><br>
  <div id="todos"></div>
</body>

</html>
